## 目录
```
### 第3 章 Laravel 框架中常用的PHP 语法… …………………………………… 39
#### 3.1 组件化开发语法条件… ………………………………………………………… 39
* 3.1.1 命名空间 …………………………………………………………………………… 39
* 3.1.2 文件包含 …………………………………………………………………………… 43
#### 3.2 匿名函数… ……………………………………………………………………… 48
* 3.2.1 匿名函数的使用 …………………………………………………………………… 49
* 3.2.2 Laravel 框架中的应用 ……………………………………………………………… 49
#### 3.3 PHP 中的特殊语法… …………………………………………………………… 50
* 3.3.1 魔术方法 …………………………………………………………………………… 50
* 3.3.2 魔术常量 …………………………………………………………………………… 53
#### 3.4 反射… …………………………………………………………………………… 55
#### 3.5 后期静态绑定… ………………………………………………………………… 58
#### 3.6 Laravel 中使用的其他新特性…………………………………………………… 60
* 3.6.1 trait ………………………………………………………………………………… 60
* 3.6.2 简化的三元运算符 ………………………………………………………………… 63
```

## 第3 章 Laravel 框架中常用的PHP 语法… …………………………………… 39
* laravel 框架中使用了大量PHP新语法: 命名空间 匿名函数 反射机制 后期静态绑定

### 3.1 组件化开发语法条件… ………………………………………………………… 39
#### 3.1.1 命名空间 …………………………………………………………………………… 39
* `namespace` 关键字定义命名空间

* `__NAMESPACE__` 魔术常量获取当前命名空间

* `\` 表示全局命名空间

* 命名空间的使用:
    1. 非限定名称或不包含前缀的类名称;
    2. 限定名称或包含前缀的名称;
    3. 完全限定名称或包含了全局前缀操作的名称.

* `use` || `use as`

#### 3.1.2 文件包含 …………………………………………………………………………… 43
* `include` 和 `require` 关键字

* PHP 配置项 `include_path`

* 类的自动载入: `spl_autoload_register()`

* laravel 中的实现方案:
    * public\index.php
    * bootstrap\autoload.php
    * vendor\autoload.php
    * vendor\composer\autoload_real.php
    * vendor\composer\ClassLoader.php
    * Illuminate\Foundation\AliasLoader.php
    

### 3.2 匿名函数… ……………………………………………………………………… 48
* 匿名函数也叫闭包函数

#### 3.2.1 匿名函数的使用 …………………………………………………………………… 49
* 匿名函数的存在既可以作用参数传给函数, 也可以作为变量赋值

* 匿名函数的另一个作用是可以从父作用域中继承变量, 即匿名函数在定义的时候如果需要使用作用域外的变量, 可以使用 use 关键字来继承作用域外的变量

#### 3.2.2 Laravel 框架中的应用 ……………………………………………………………… 49
* 在服务提供者这测过程中, 通过将服务名称与提供服务的匿名函数进行绑定, 在使用时可以实现动态服务解析
    * 例如: Illuminate\Routing\ControllerServiceProvider.php

### 3.3 PHP 中的特殊语法… …………………………………………………………… 50
* 魔术方法 和 魔术常量

#### 3.3.1 魔术方法 …………………………………………………………………………… 50
* 通常以 `__` 开头:
    * `__construct()`: 构造函数, 每次实例化对象时调用, 适合做在使用对象之前做一些初始化工作

    * `__destruct()`: 析构函数会在对象的所有引用都被删除或者对象被显式销毁时执行

    * `__set()`: 属性重载, 在给不可访问的属性赋值时会被调用

    * `__get()`: 读取不可访问属性时会被调用

    * `__isset()`: 对不可访问属性调用 `isset()` 或 `empty()` 时会被调用

    * `__unset()`: 对不可访问属性调用 `unset()` 时会被调用

    * `__sleep()`: `serialize()` 检查类当中是否有魔术方法 `__sleep()`. 若有, 该函数将需求话之前运行

    * `__wakeup()`: `unserialize()` 检查类当中是否有魔术方法 `__wakeup()`. 若有, 该函数将需求话之前运行, 此函数可以用于重建对象

    * `__toString()`: 当一个类被当作字符串访问时调用, 例如 `echo $obj`

    * `__invoke()`: 当一个类被当作函数使用时调用, 例如 `$obj;`

    * `__clone()`: 复制对象时调用

    * `__call()`: 调用一个不可访问的方法时被调用

    * `__callStatic()`: 以静态方式调用一个不可访问方法时被调用

    * `__autoload()`: 试图使用尚未被定义的类时自动调用

* 在 laravel 中使用魔术方法的案例:
    * Illuminate\Database\Eloquent\Model.php

#### 3.3.2 魔术常量 …………………………………………………………………………… 53
* 很多常量都是由不同的扩展库定义的, 只有在加载了这些扩展库时才会出现

* PHP 在运行环境中 提供了八个魔术常量 (但是他们的值是随着代码中 的位置改变而变化的)
    * `__LINE__`: 当前行

    * `__FILE__`: 文件完整路径和文件名 (绝对路径)

    * `__DIR__`: 文件所在的目录. 等价于 `dirname(__FILE__)`, 除非是根目录, 否则目录中不包含末尾的斜杠

    * `__FUNCTION__`: 函数名称

    * `__CLASS__`: 类的名称, 包含其被声明的命名空间. php5.4起对 `trait` 也其作用

    * `__TRAIT__`: trait 的名称, 包含其被声明的命名空间

    * `__METHOD__`: 类的方法名

    * `__NAMESPACE__`: 命名空间的名称


### 3.4 反射… …………………………………………………………………………… 55
* PHP5 具有完整的反射 API, 添加了对 类 接口 函数 方法 和扩展进行反向工作的能力

* 此外反射还提供了获取函数 类 和方法等语言结构中的文档和注释方法

* `ReflectionClass()`
    * http://php.net/manual/zh/class.reflectionclass.php

* laravel 中服务容器解析服务的过程中就用到了反射机制
    * `Illuminate\Container\Container.php`

* laravel 解析服务通过 `build()` 函数实现, 一般分为两种情况:
    * 第一种是查找对应服务是否被服务提供者注册为实例或提供服务的匿名函数, 是就直接解析服务;
    * 第二种是服务名称没有对应的服务绑定, 通过反射机制来动态创建服务:
        * 第一步通过放射机制获取服务类构造函数信息;
        * 第二步是解决服务类构造函数的依赖问题.

### 3.5 后期静态绑定… ………………………………………………………………… 58
* 后期静态绑定: 
    * 用于在继承范围内引用静态调用的类, 即在类的继承过程中, 使用的类不再是当前类, 而是调用类
    
* 后期静态绑定使用关键字 static 来实现, 通过这种机制, `static::` 不再被解析为定义当前方法所在的类, 而是在实际运行时计算得到的, 即为运行时最初调用的类

* 在 laravel 中的应用 `Illuminate\Database\Eloquent\Model.php`
    * eg: `static::create($attributes)`


### 3.6 Laravel 中使用的其他新特性…………………………………………………… 60
#### 3.6.1 trait ………………………………………………………………………………… 60
* trait 实现代码复用, 增加了水平特性的组合

* trait 和 类相似, 但是不能像类那样进行实例化, 而是通过关键字 use 添加到其他类的内部

* trait 的重要特性:
    * 优先级: 当前类的方法会覆盖 trait 中的方法, 而 trait 中的方法会覆盖基类的方法';
    * 多个 trait 组合: 通过逗号分隔;
    * 冲突的解决: 两个 trait 在同一个类中命名冲突 (同名方法), 使用 `insteadof` 操作符来明确使用冲突中的哪一个方法. 也可以通过 `as` 操作副将其中一个冲突方法以另一个名称的引入;
    * 修改方法的访问控制: 使用 as 语法;
    * trait 的抽象方法: trait 中可以使用抽象成员, 类当中必须实现这个抽象方法;
    * trait 的静态成员: trait 中可以使用静态方法和静态变量;
    * trait 的属性定义: trait 中通用可以定义属性.

* laravel 中的应用:
    * `app\Http\Controllers\Auth\AuthController.php`
    * `Illuminate\Foundation\Auth\AuthenticateAndRegistersUsers.php`

#### 3.6.2 简化的三元运算符 ………………………………………………………………… 63
* `$value = $expre1 ?: $expr3`
    * $value 为true 时值为 $expr1, 否则为 $value 值为 $expr3
