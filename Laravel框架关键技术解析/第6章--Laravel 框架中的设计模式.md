## 目录
```
### 第6 章 Laravel 框架中的设计模式… …………………………………………… 92
#### 6.1 服务容器… ……………………………………………………………………… 92
* 6.1.1 依赖与耦合 ………………………………………………………………………… 92
* 6.1.2 工厂模式 …………………………………………………………………………… 94
* 6.1.3 IoC 模式 …………………………………………………………………………… 95
#### 6.1.4 源码解析 …………………………………………………………………………… 99
* 6.2 请求处理管道简介… …………………………………………………………… 104
* 6.2.1 装饰者模式 ………………………………………………………………………… 105
* 6.2.2 请求处理管道 ……………………………………………………………………… 106
* 6.2.3 部分源码 …………………………………………………………………………… 110
```

## 第6 章 Laravel 框架中的设计模式… …………………………………………… 92
### 6.1 服务容器… ……………………………………………………………………… 92
* __服务容器__ 是整个系统功能调度配置的核心

#### 6.1.1 依赖与耦合 ………………………………………………………………………… 92
* __IoC (Inversion Of Control, 控制反转)__
    * 服务容器就相当于一个 IoC 容器, IoC 容器要从 __控制反转模式__ 说起
    
* __控制反转模式__: 用来解决系统组件间相互依赖关系的一种模式  

* 在一个组件内使用 `new` 关键字解决了 依赖问题, 却带来了高耦合问题, 所以:
    * 所以就要把 `new` 操作放在组件外部, 组件接收一个 __接口__, 依赖的 类 都实现这个 接口, 从而利用 _鸭子类型_ 的原理使组件接收的 类 更加灵活.

* eg: 详见 6.1.1.duck_type


#### 6.1.2 工厂模式 …………………………………………………………………………… 94
* 从上面而知, 交通工具实例化过程是经常需要改变的, 所以将此提取到外部来管理.
    * 使用工厂模式实现, 当然也可以利用工厂方法模式

* eg: 详见 6.1.2.factory

* "旅行者" 和 "交通工具" 之间的依赖关系没有了, 但变成了 "旅行者" 和 "交通工具工厂" 之间的依赖.
    * 当需求增加, 需要修改简单工厂模式, 随着依赖增多, 工厂将变得庞大不容易维护.


#### 6.1.3 IoC 模式 …………………………………………………………………………… 95
* IoC (Inversion of Control)模式又称 __依赖注入__(Dependency Injection)模式

* 控制反转是将组件间的依赖关系从程序内部提取到外部容器来管理, 而依赖注入是指组件的依赖通过外部参数活其他形式注释, 两种说法本质上是一个意思.

* eg: 详见 6.1.1.duck_type (一个简单的依赖注入实例)

* 上述实例就是一个依赖注入的过程, Traveller 类的构造函数依赖一个外部具有的 Visit 接口的实例.
    * 依赖注入需要通过 __接口__ 来限制, 而不能随意开发, 这也体现了设计模式的另一个原则 -- 针对 __接口__ 编程, 而不是针对实现编程.
    
* 上面我们是通过 _手动注入依赖_ , 而通过 IoC 容器我们可以实现 _自动依赖注入_.

* eg: 详见 6.1.3.container-ioc (实现 IoC 容器完成自动依赖注入 (Laravel 框架中的设计方法进行简化))

* TODO: PHP 反射机制还是很多内容的，需要实践。


### 6.1.4 源码解析 …………………………………………………………………………… 99
#### 6.2 请求处理管道简介… …………………………………………………………… 104
* 对于服务器来说，真正要实现的功能是处理输入的请求，并讲生成的响应输出给客户端，而在这个过程中需要经理很多处理步骤， 这些步骤许哟阿做到松耦合，随时可以在这些步骤中间添加新的处理功能而使改动尽可能的小

#### 6.2.1 装饰者模式 ………………………………………………………………………… 105
* eg: 详见 6.2.1.decorator

#### 6.2.2 请求处理管道 ……………………………………………………………………… 106


#### 6.2.3 部分源码 …………………………………………………………………………… 110

