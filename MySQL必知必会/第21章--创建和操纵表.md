## 目录
```
### 第21章 创建和操纵表............. 144
#### 21.1 创建表............................... 144
* 21.1.1 表创建基础........ 144
* 21.1.2 使用NULL值 ....... 146
* 21.1.3 主键再介绍........ 147
* 21.1.4 使用AUTO_INCREMENT......... 148
* 21.1.5 指定默认值........ 149
* 21.1.6 引擎类型............ 150
#### 21.2 更新表............................... 151
#### 21.3 删除表............................... 153
#### 21.4 重命名表........................... 153
#### 21.5 小结 .................................. 154
```


## 第21章 创建和操纵表............. 144

### 21.1 创建表............................... 144

#### 21.1.1 表创建基础........ 144
* `CREATE TABLE` 创建表，必须给出下列信息：
    * 新表的名字，在关键字CREATE TABLE之后给出；
    * 表列的名字和定义，用逗号分隔。

* eg:
```mysql
CREATE TABLE customers
(
    cust_id     int         NOT NULL AUTO_INCREMENT,
    cust_name   char(50)    NOT NULL,
    cust_city   char(50)    NULL,
    PRIMARY KEY (cust_id)
) ENGINE=InnoDB;
```

* 仅想在一个表不存在时创建它，应该在表名后给出 `IF NOT EXISTS`

#### 21.1.2 使用NULL值 ....... 146
* **理解 NULL**
    * 不要把 NULL值 与空串相混淆。NULL值 是没有值，它不是空串。

#### 21.1.3 主键再介绍........ 147
* 主键值 **必须唯一**

* eg: `... PRIMARY KEY (order_num, order_item) ...`
    * 订单号（`order_num`列）和订单物品（`order_item列`）的组合是唯一的，从而适合作为主键

#### 21.1.4 使用AUTO_INCREMENT......... 148
* `AUTO_INCREMENT` 告诉 MySQL，本列每当增加一行时自动增量。每次执行一个 INSERT 操作，MySQL 自动对该列增量（从而才有这个关键字 AUTO_INCREMENT），给该列赋予下一个可用的值

* 每个表只允许一个 AUTO_INCREMENT 列，而且它 **必须被索引**（如，通过使它成为主键）。

* **确定 AUTO_INCREMENT 值**
    * MySQL生成（通过自动增量）主键的一个缺点是你不知道这些值都是谁

    * 如何在使用 `AUTO_INCREMENT` 列时获得这个值呢？可使用 `last_insert_id()` 函数获得这个值: `SELECT last_insert_id()` (PS: 甚至都不用指定表名, 在并发的时候会不会有问题?)            

    * 此语句返回最后一个 `AUTO_INCREMENT` 值

#### 21.1.5 指定默认值........ 149
* **使用默认值而不是NULL值** 
    * 许多数据库开发人员使用默认值而不是 NULL 列，特别是对用于计算或数据分组的列更是如此

#### 21.1.6 引擎类型............ 150
* 需要知道的引擎：
    * InnoDB 是一个可靠的 **事务处理** 引擎（参见第26章）, 它不支持全文本搜索；
    * MEMORY 在功能等同于 MyISAM, 但由于数据存储在内存（不是磁盘）中, *速度很快*（特别适合于临时表）；
    * MyISAM 是一个性能极高的引擎, 它支持全文本搜索（参见第18章）, 但 *不支持事务处理*

### 21.2 更新表............................... 151
* `ALTER TABLE` 语句
    * 增加字段: `ALTER TABLE ... ADD ...`
    * 删除字段: `ALTER TABLE ... DROP COLUMN ...`
    * 定义外键: `ALTER TABLE tab1 ADD CONSTRAINT user_id FOREGIN KEY (user_id) REFERENCES users (id);`

* 复杂的表结构更改一般需要手动删除过程，它涉及以下步骤：
    * 用新的列布局创建一个新表;
    * 使用INSERT SELECT语句（关于这条语句的详细介绍，请参阅第19章）从旧表复制数据到新表。如果有必要，可使用转换函数和计算字段;
    * 检验包含所需数据的新表;
    * 重命名旧表（如果确定，可以删除它）;
    * 用旧表原来的名字重命名新表;
    * 根据需要，重新创建触发器、存储过程、索引和外键.

* **小心使用 ALTER TABLE**

### 21.3 删除表............................... 153
* `DROP TABLE tab`

### 21.4 重命名表........................... 153
* `RENAME TABLE tab1 TO tab2, back1 TO back2;`

### 21.5 小结 .................................. 154