## 目录
```
### 第22章 使用视图 ..................... 155
#### 22.1 视图 .................................. 155
* 22.1.1 为什么使用视图 ................... 156
* 22.1.2 视图的规则和限制 ................... 157
#### 22.2 使用视图........................... 157
* 22.2.1 利用视图简化复杂的联结........ 157
* 22.2.2 用视图重新格式化检索出的数据.... 158
* 22.2.3 用视图过滤不想要的数据........ 159
* 22.2.4 使用视图与计算字段 ................... 160
* 22.2.5 更新视图 ............161
#### 22.3 小结...................................162
```


## 第22章 使用视图 ..................... 155
### 22.1 视图 .................................. 155
* 视图是虚拟的表。与包含数据的表不一样，视图只包含使用时动态检索数据的查询。

#### 22.1.1 为什么使用视图 ................... 156
* 下面是视图的一些常见应用:
    * 重用 SQL 语句;
    * 简化复杂的 SQL 操作。在编写查询后，可以方便地重用它而不必知道它的基本查询细节;
    * 使用表的组成部分而不是整个表;
    * 保护数据。可以给用户授予表的特定部分的访问权限而不是整个表的访问权限;
    * 更改数据格式和表示。视图可返回与底层表的表示和格式不同的数据;

* **性能问题**
    * 因为视图不包含数据，所以每次使用视图时，都必须处理查询执行时所需的任一个检索。如果你用多个联结和过滤创建了复杂的视图或者嵌套了视图，可能会发现性能下降得很厉害。因此，在部署使用了大量视图的应用前，应该进行测试。

#### 22.1.2 视图的规则和限制 ................... 157
* 关于视图创建和使用的一些最常见的规则和限制:
    * 与表一样，视图必须唯一命名（不能给视图取与别的视图或表相同的名字）;
    * 对于可以创建的视图数目没有限制;
    * 为了创建视图，必须具有足够的访问权限。这些限制通常由数据库管理人员授予;
    * 视图可以嵌套，即可以利用从其他视图中检索数据的查询来构造一个视图;
    * ORDER BY可以用在视图中，但如果从该视图检索数据 SELECT 中也含有 ORDER BY，那么该视图中的 ORDER BY 被覆盖;
    * 视图不能索引，也不能有关联的触发器或默认值;
    * 视图可以和表一起使用。例如，编写一条联结表和视图的 SELECT 语句;

### 22.2 使用视图........................... 157
* 视图的创建:
    * 视图用 `CREATE VIEW` 语句来创建;
    * 使用 `SHOW CREATE VIEW viewname;`来查看创建视图的语句;
    * 用 DROP 删除视图，其语法为 `DROP VIEW viewname;`;
    * 更新视图时，可以先用 DROP 再用 CREATE，也可以直接用 `CREATE OR REPLACE VIEW`。如果要更新的视图不存在，则第2条更新语句会创建一个视图；如果要更新的视图存在，则第2条更新语句会替换原有视图。

#### 22.2.1 利用视图简化复杂的联结........ 157
* eg:
```
CREATE VIEW dictview AS
SELECT id, name FROM tag;
```

#### 22.2.2 用视图重新格式化检索出的数据.... 158
* 视图的另一常见用途是重新格式化检索出的数据

#### 22.2.3 用视图过滤不想要的数据........ 159
* 视图对于应用普通的 WHERE 子句也很有用

#### 22.2.4 使用视图与计算字段 ................... 160
* 视图对于简化计算字段的使用特别有用

#### 22.2.5 更新视图 ............161
* 视图是可更新的（即，可以对它们使用 INSERT、UPDATE 和 DELETE）。更新一个视图将更新其基表（可以回忆一下，视图本身没有数据）。如果你对视图增加或删除行， **实际上是对其基表增加或删除行** (很重要)

* 如果视图定义中有以下操作，则 **不能进行视图的更新**： (简单点讲, 无法定位到基表)
    * 分组（使用GROUP BY和HAVING）;
    * 联结;
    * 子查询;
    * 并;
    * 聚集函数（Min()、Count()、Sum()等）;
    * DISTINCT;
    * 导出（计算）列.

* 这听上去好像是一个严重的限制，但实际上不是，因为 *视图主要用于数据检索*

### 22.3 小结...................................162