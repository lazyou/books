## 目录
```
### 第29章 数据库维护 .................205
#### 29.1 备份数据...........................205
#### 29.2 进行数据库维护 ...............206
#### 29.3 诊断启动问题 ...................207
#### 29.4 查看日志文件 ...................207
#### 29.5 小结...................................208
```


## 第29章 数据库维护 .................205



### 29.1 备份数据...........................205
* `mysqldump` 转储所有数据库内容到某个外部文件:
    ```
    备份单个数据库或单个数据库中的指定表：
    mysqldump [OPTIONS] database [tb1] [tb2]…

    备份多个数据库：
    mysqldump [OPTIONS] –databases [OPTIONS] DB1 [DB2 DB3...]

    备份所有数据库：
    mysqldump [OPTIONS] –all-databases [OPTIONS]
    ```

* `mysqlhotcopy` 从一个数据库复制所有数据（并非所有数据库引擎都支持这个实用程序）

* 使用 MySQL 的 `BACKUP TABLE` 或 `SELECT INTO OUTFILE` 转储所有数据到某个外部文件。
    * 这两条语句都接受将要创建的系统文件名，此系统文件必须不存在，否则会出错。数据可以用 `RESTORE TABLE` 来复原

### 29.2 进行数据库维护 ...............206
* `ANALYZE TABLE`: 用来检查表键是否正确

* `CHECK TABLE`: 用来针对许多问题对表进行检查
    * 在 MyISAM 表上还对索引进行检查

* `REPAIR TABLE` 和 `OPTIMIZE TABLE`:
    * 如果 MyISAM 表访问产生不正确和不一致的结果，可能需要用 `REPAIR TABLE` 来修复相应的表。这条语句*不应该经常使用*，如果需要经常使用，可能会有更大的问题要解决;
    * 如果从一个表中删除大量数据，应该使用 `OPTIMIZE TABLE` 来 *收回所用的空间，从而优化表的性能*.

### 29.3 诊断启动问题 ...................207

### 29.4 查看日志文件 ...................207
* 主要的日志文件有以下几种:
    * 错误日志。它包含启动和关闭问题以及任意关键错误的细节。此日志通常名为 hostname.err，位于data目录中。此日志名可用 `--log-error` 命令行选项更改;

    * 查询日志。它记录所有 MySQL 活动，在诊断问题时非常有用。此日志文件可能会很快地变得非常大，因此不应该长期使用它。此日志通常名为 hostname.log，位于 data 目录中。此名字可以用 `--log` 命令行选项更改';

    * 二进制日志。它记录更新过数据（或者可能更新过数据）的所有语句。此日志通常名为 hostname-bin，位于 data 目录内。此名字可以用 `--log-bin` 命令行选项更改。注意，这个日志文件是 MySQL5 中添加的，以前的MySQL 版本中使用的是更新日志;

    * 缓慢查询日志。顾名思义，此日志记录执行缓慢的任何查询。这个日志在确定数据库何处需要优化很有用。此日志通常名为 hostname-slow.log ，位于 data 目录中。此名字可以用 `--log-slow-queries` 命令行选项更改.

### 29.5 小结...................................208


